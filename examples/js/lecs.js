!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("LECS",[],e):"object"==typeof exports?exports.LECS=e():t.LECS=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n;return e=n=t.call(this,e)||this,console.log("LXEntity constructed"),n}return i(e,t),e.prototype.connectedCallback=function(){console.log("LXEntity connected")},e}(n(7).LXNode);e.LXEntity=r,window.customElements.define("lx-entity",r)},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),n(3),n(4),o(n(5)),o(n(0)),o(n(8))},function(t,e){(function(){"use strict";var t=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function e(e){var n=t.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!n&&e}function n(t){var e=t.isConnected;if(void 0!==e)return e;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function o(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function i(t,e,n){n=void 0===n?new Set:n;for(var r=t;r;){if(r.nodeType===Node.ELEMENT_NODE){var s=r;e(s);var a=s.localName;if("link"===a&&"import"===s.getAttribute("rel")){if((r=s.import)instanceof Node&&!n.has(r))for(n.add(r),r=r.firstChild;r;r=r.nextSibling)i(r,e,n);r=o(t,s);continue}if("template"===a){r=o(t,s);continue}if(s=s.__CE_shadowRoot)for(s=s.firstChild;s;s=s.nextSibling)i(s,e,n)}r=r.firstChild?r.firstChild:o(t,r)}}function r(t,e,n){t[e]=n}function s(){this.a=new Map,this.g=new Map,this.c=[],this.f=[],this.b=!1}function a(t,e){t.b&&i(e,function(e){return c(t,e)})}function c(t,e){if(t.b&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.c.length;n++)t.c[n](e);for(n=0;n<t.f.length;n++)t.f[n](e)}}function l(t,e){var n=[];for(i(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state?t.connectedCallback(o):p(t,o)}}function h(t,e){var n=[];for(i(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state&&t.disconnectedCallback(o)}}function u(t,e,n){var o=(n=void 0===n?{}:n).u||new Set,r=n.i||function(e){return p(t,e)},s=[];if(i(e,function(e){if("link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var i=new Set(o);i.delete(n),u(t,n,{u:i,i:r})}})}else s.push(e)},o),t.b)for(e=0;e<s.length;e++)c(t,s[e]);for(e=0;e<s.length;e++)r(s[e])}function p(t,e){if(void 0===e.__CE_state){var o=e.ownerDocument;if((o.defaultView||o.__CE_isImportDocument&&o.__CE_hasRegistry)&&(o=t.a.get(e.localName))){o.constructionStack.push(e);var i=o.constructorFunction;try{try{if(new i!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{o.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=o,o.attributeChangedCallback)for(o=o.observedAttributes,i=0;i<o.length;i++){var r=o[i],s=e.getAttribute(r);null!==s&&t.attributeChangedCallback(e,r,null,s,null)}n(e)&&t.connectedCallback(e)}}}function f(t){var e=document;this.c=t,this.a=e,this.b=void 0,u(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function d(t){t.b&&t.b.disconnect()}function m(){var t=this;this.b=this.a=void 0,this.c=new Promise(function(e){t.b=e,t.a&&e(t.a)})}function v(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0)}function y(t){this.c=!1,this.a=t,this.j=new Map,this.f=function(t){return t()},this.b=!1,this.g=[],this.o=new f(t)}s.prototype.connectedCallback=function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t)},s.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t)},s.prototype.attributeChangedCallback=function(t,e,n,o,i){var r=t.__CE_definition;r.attributeChangedCallback&&-1<r.observedAttributes.indexOf(e)&&r.attributeChangedCallback.call(t,e,n,o,i)},f.prototype.f=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||d(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,o=0;o<n.length;o++)u(this.c,n[o])},y.prototype.l=function(t,n){var o=this;if(!(n instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!e(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.a.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.c)throw Error("A custom element is already being defined.");this.c=!0;try{var i=function(t){var e=r[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},r=n.prototype;if(!(r instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var s=i("connectedCallback"),a=i("disconnectedCallback"),c=i("adoptedCallback"),l=i("attributeChangedCallback"),h=n.observedAttributes||[]}catch(t){return}finally{this.c=!1}n={localName:t,constructorFunction:n,connectedCallback:s,disconnectedCallback:a,adoptedCallback:c,attributeChangedCallback:l,observedAttributes:h,constructionStack:[]},function(t,e,n){t.a.set(e,n),t.g.set(n.constructorFunction,n)}(this.a,t,n),this.g.push(n),this.b||(this.b=!0,this.f(function(){return function(t){if(!1!==t.b){t.b=!1;for(var e=t.g,n=[],o=new Map,i=0;i<e.length;i++)o.set(e[i].localName,[]);for(u(t.a,document,{i:function(e){if(void 0===e.__CE_state){var i=e.localName,r=o.get(i);r?r.push(e):t.a.a.get(i)&&n.push(e)}}}),i=0;i<n.length;i++)p(t.a,n[i]);for(;0<e.length;){var r=e.shift();i=r.localName,r=o.get(r.localName);for(var s=0;s<r.length;s++)p(t.a,r[s]);(i=t.j.get(i))&&v(i)}}}(o)}))},y.prototype.i=function(t){u(this.a,t)},y.prototype.get=function(t){if(t=this.a.a.get(t))return t.constructorFunction},y.prototype.m=function(t){if(!e(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var n=this.j.get(t);return n?n.c:(n=new m,this.j.set(t,n),this.a.a.get(t)&&!this.g.some(function(e){return e.localName===t})&&v(n),n.c)},y.prototype.s=function(t){d(this.o);var e=this.f;this.f=function(n){return t(function(){return e(n)})}},window.CustomElementRegistry=y,y.prototype.define=y.prototype.l,y.prototype.upgrade=y.prototype.i,y.prototype.get=y.prototype.get,y.prototype.whenDefined=y.prototype.m,y.prototype.polyfillWrapFlushCallback=y.prototype.s;var _=window.Document.prototype.createElement,g=window.Document.prototype.createElementNS,E=window.Document.prototype.importNode,w=window.Document.prototype.prepend,b=window.Document.prototype.append,C=window.DocumentFragment.prototype.prepend,T=window.DocumentFragment.prototype.append,N=window.Node.prototype.cloneNode,O=window.Node.prototype.appendChild,M=window.Node.prototype.insertBefore,x=window.Node.prototype.removeChild,D=window.Node.prototype.replaceChild,A=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),S=window.Element.prototype.attachShadow,L=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),P=window.Element.prototype.getAttribute,j=window.Element.prototype.setAttribute,q=window.Element.prototype.removeAttribute,k=window.Element.prototype.getAttributeNS,R=window.Element.prototype.setAttributeNS,H=window.Element.prototype.removeAttributeNS,F=window.Element.prototype.insertAdjacentElement,I=window.Element.prototype.insertAdjacentHTML,X=window.Element.prototype.prepend,Y=window.Element.prototype.append,Q=window.Element.prototype.before,V=window.Element.prototype.after,W=window.Element.prototype.replaceWith,z=window.Element.prototype.remove,G=window.HTMLElement,$=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),U=window.HTMLElement.prototype.insertAdjacentElement,B=window.HTMLElement.prototype.insertAdjacentHTML,J=new function(){};function K(t,e,o){function i(e){return function(o){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];r=[];for(var s=[],a=0;a<i.length;a++){var c=i[a];if(c instanceof Element&&n(c)&&s.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)r.push(c);else r.push(c)}for(e.apply(this,i),i=0;i<s.length;i++)h(t,s[i]);if(n(this))for(i=0;i<r.length;i++)(s=r[i])instanceof Element&&l(t,s)}}void 0!==o.h&&(e.prepend=i(o.h)),void 0!==o.append&&(e.append=i(o.append))}var Z,tt=window.customElements;if(!tt||tt.forcePolyfill||"function"!=typeof tt.define||"function"!=typeof tt.get){var et=new s;Z=et,window.HTMLElement=function(){function t(){var t=this.constructor,e=Z.g.get(t);if(!e)throw Error("The custom element being constructed was not registered with `customElements`.");var n=e.constructionStack;if(0===n.length)return n=_.call(document,e.localName),Object.setPrototypeOf(n,t.prototype),n.__CE_state=1,n.__CE_definition=e,c(Z,n),n;var o=n[e=n.length-1];if(o===J)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return n[e]=J,Object.setPrototypeOf(o,t.prototype),c(Z,o),o}return t.prototype=G.prototype,Object.defineProperty(t.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:t}),t}(),function(){var t=et;r(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructorFunction}return e=_.call(this,e),c(t,e),e}),r(Document.prototype,"importNode",function(e,n){return e=E.call(this,e,!!n),this.__CE_hasRegistry?u(t,e):a(t,e),e}),r(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var o=t.a.get(n);if(o)return new o.constructorFunction}return e=g.call(this,e,n),c(t,e),e}),K(t,Document.prototype,{h:w,append:b})}(),K(et,DocumentFragment.prototype,{h:C,append:T}),function(){function t(t,o){Object.defineProperty(t,"textContent",{enumerable:o.enumerable,configurable:!0,get:o.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)o.set.call(this,t);else{var i=void 0;if(this.firstChild){var r=this.childNodes,s=r.length;if(0<s&&n(this)){i=Array(s);for(var a=0;a<s;a++)i[a]=r[a]}}if(o.set.call(this,t),i)for(t=0;t<i.length;t++)h(e,i[t])}}})}var e=et;r(Node.prototype,"insertBefore",function(t,o){if(t instanceof DocumentFragment){var i=Array.prototype.slice.apply(t.childNodes);if(t=M.call(this,t,o),n(this))for(o=0;o<i.length;o++)l(e,i[o]);return t}return i=n(t),o=M.call(this,t,o),i&&h(e,t),n(this)&&l(e,t),o}),r(Node.prototype,"appendChild",function(t){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=O.call(this,t),n(this))for(var i=0;i<o.length;i++)l(e,o[i]);return t}return o=n(t),i=O.call(this,t),o&&h(e,t),n(this)&&l(e,t),i}),r(Node.prototype,"cloneNode",function(t){return t=N.call(this,!!t),this.ownerDocument.__CE_hasRegistry?u(e,t):a(e,t),t}),r(Node.prototype,"removeChild",function(t){var o=n(t),i=x.call(this,t);return o&&h(e,t),i}),r(Node.prototype,"replaceChild",function(t,o){if(t instanceof DocumentFragment){var i=Array.prototype.slice.apply(t.childNodes);if(t=D.call(this,t,o),n(this))for(h(e,o),o=0;o<i.length;o++)l(e,i[o]);return t}i=n(t);var r=D.call(this,t,o),s=n(this);return s&&h(e,o),i&&h(e,t),s&&l(e,t),r}),A&&A.get?t(Node.prototype,A):function(t,e){t.b=!0,t.c.push(e)}(e,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++){var n=this.childNodes[e];n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent)}return t.join("")},set:function(t){for(;this.firstChild;)x.call(this,this.firstChild);null!=t&&""!==t&&O.call(this,document.createTextNode(t))}})})}(),function(){function t(t,e){Object.defineProperty(t,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(t){var o=this,r=void 0;if(n(this)&&(r=[],i(this,function(t){t!==o&&r.push(t)})),e.set.call(this,t),r)for(var c=0;c<r.length;c++){var l=r[c];1===l.__CE_state&&s.disconnectedCallback(l)}return this.ownerDocument.__CE_hasRegistry?u(s,this):a(s,this),t}})}function e(t,e){r(t,"insertAdjacentElement",function(t,o){var i=n(o);return t=e.call(this,t,o),i&&h(s,o),n(t)&&l(s,o),t})}function o(t,e){function n(t,e){for(var n=[];t!==e;t=t.nextSibling)n.push(t);for(e=0;e<n.length;e++)u(s,n[e])}r(t,"insertAdjacentHTML",function(t,o){if("beforebegin"===(t=t.toLowerCase())){var i=this.previousSibling;e.call(this,t,o),n(i||this.parentNode.firstChild,this)}else if("afterbegin"===t)i=this.firstChild,e.call(this,t,o),n(this.firstChild,i);else if("beforeend"===t)i=this.lastChild,e.call(this,t,o),n(i||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");i=this.nextSibling,e.call(this,t,o),n(this.nextSibling,i)}})}var s=et;S&&r(Element.prototype,"attachShadow",function(t){t=S.call(this,t);var e=s;if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.c.length;n++)e.c[n](t)}return this.__CE_shadowRoot=t}),L&&L.get?t(Element.prototype,L):$&&$.get?t(HTMLElement.prototype,$):function(t,e){t.b=!0,t.f.push(e)}(s,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return N.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName,n=e?this.content:this,o=g.call(document,this.namespaceURI,this.localName);for(o.innerHTML=t;0<n.childNodes.length;)x.call(n,n.childNodes[0]);for(t=e?o.content:o;0<t.childNodes.length;)O.call(n,t.childNodes[0])}})}),r(Element.prototype,"setAttribute",function(t,e){if(1!==this.__CE_state)return j.call(this,t,e);var n=P.call(this,t);j.call(this,t,e),e=P.call(this,t),s.attributeChangedCallback(this,t,n,e,null)}),r(Element.prototype,"setAttributeNS",function(t,e,n){if(1!==this.__CE_state)return R.call(this,t,e,n);var o=k.call(this,t,e);R.call(this,t,e,n),n=k.call(this,t,e),s.attributeChangedCallback(this,e,o,n,t)}),r(Element.prototype,"removeAttribute",function(t){if(1!==this.__CE_state)return q.call(this,t);var e=P.call(this,t);q.call(this,t),null!==e&&s.attributeChangedCallback(this,t,e,null,null)}),r(Element.prototype,"removeAttributeNS",function(t,e){if(1!==this.__CE_state)return H.call(this,t,e);var n=k.call(this,t,e);H.call(this,t,e);var o=k.call(this,t,e);n!==o&&s.attributeChangedCallback(this,e,n,o,t)}),U?e(HTMLElement.prototype,U):F?e(Element.prototype,F):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),B?o(HTMLElement.prototype,B):I?o(Element.prototype,I):console.warn("Custom Elements: `Element#insertAdjacentHTML` was not patched."),K(s,Element.prototype,{h:X,append:Y}),function(t){function e(e){return function(o){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];r=[];for(var s=[],a=0;a<i.length;a++){var c=i[a];if(c instanceof Element&&n(c)&&s.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)r.push(c);else r.push(c)}for(e.apply(this,i),i=0;i<s.length;i++)h(t,s[i]);if(n(this))for(i=0;i<r.length;i++)(s=r[i])instanceof Element&&l(t,s)}}var o=Element.prototype;void 0!==Q&&(o.before=e(Q)),void 0!==Q&&(o.after=e(V)),void 0!==W&&r(o,"replaceWith",function(e){for(var o=[],i=0;i<arguments.length;++i)o[i]=arguments[i];i=[];for(var r=[],s=0;s<o.length;s++){var a=o[s];if(a instanceof Element&&n(a)&&r.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)i.push(a);else i.push(a)}for(s=n(this),W.apply(this,o),o=0;o<r.length;o++)h(t,r[o]);if(s)for(h(t,this),o=0;o<i.length;o++)(r=i[o])instanceof Element&&l(t,r)}),void 0!==z&&r(o,"remove",function(){var e=n(this);z.call(this),e&&h(t,this)})}(s)}(),document.__CE_hasRegistry=!0;var nt=new y(et);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:nt})}}).call(self)},function(t,e){
/**
@license @nocompile
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}()}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=function(){function t(){}return t.isIE11=o.isIE11,t}();e.utils=i},function(t,e,n){"use strict";var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.isIE11=11===(o=-1,i=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?null!=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(i)&&(o=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(i)&&(o=parseFloat(RegExp.$1)),o)},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){return e=t.call(this)||this,console.log("LXNode constructed"),e}return i(e,t),e.prototype.connectedCallback=function(){console.log("LXNode connected")},e}(HTMLElement);e.LXNode=r,window.customElements.define("lx-node",r)},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),s=n(0),a=n(10),c=function(t){function e(e){return(e=t.call(this,e)||this)._world=new r.World,e._prevTime=performance.now(),e.update=a.bind(e.update,e),requestAnimationFrame(e.update),console.log("LXScene constructed"),e}return i(e,t),e.prototype.connectedCallback=function(){console.log("LXScene connected")},e.prototype.update=function(t){var e=t-this._prevTime;this._world.execute(e,t),console.log("update"),requestAnimationFrame(this.update)},e}(s.LXEntity);e.LXScene=c,window.customElements.define("lx-scene",c)},function(t,e,n){"use strict";n.r(e),n.d(e,"SchemaTypes",function(){return C}),n.d(e,"System",function(){return b}),n.d(e,"World",function(){return w});class o{constructor(t){this.systems=[],this.world=t}registerSystem(t,e){return this.systems.push(new t(this.world,e)),this.sortSystems(),this}sortSystems(){this.systems.sort((t,e)=>e.priority-t.priority)}removeSystem(t){var e=this.systems.indexOf(t);~e&&this.systems.splice(e,1)}execute(t,e){this.systems.forEach(n=>{if(n.enabled){if(n.execute){let o=performance.now();n.execute(t,e),n.executeTime=performance.now()-o}n.clearEvents()}})}stats(){for(var t={numSystems:this.systems.length,systems:{}},e=0;e<this.systems.length;e++){var n=this.systems[e],o=t.systems[n.constructor.name]={queries:{}};for(var i in n.ctx)o.queries[i]=n.ctx[i].stats()}return t}}class i{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(t,e){let n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){return void 0!==this._listeners[t]&&-1!==this._listeners[t].indexOf(e)}removeEventListener(t,e){var n=this._listeners[t];if(void 0!==n){var o=n.indexOf(e);-1!==o&&n.splice(o,1)}}dispatchEvent(t,e,n){this.stats.fired++;var o=this._listeners[t];if(void 0!==o)for(var i=o.slice(0),r=0;r<i.length;r++)i[r].call(this,e,n)}resetCounters(){this.stats.fired=this.stats.handled=0}}function r(t){return t.name}function s(t){var e=r(t);return e.charAt(0).toLowerCase()+e.slice(1)}function a(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];e.push(r(o))}return e.map(function(t){return t.toLowerCase()}).sort().join("-")}class c{constructor(t,e){this.Components=t,this.entities=[],this.eventDispatcher=new i,this.reactive=!1,this.key=a(t);for(var n=0;n<e._entities.length;n++){var o=e._entities[n];o.hasAllComponents(t)&&this.entities.push(o)}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}c.prototype.ENTITY_ADDED="Query#ENTITY_ADDED",c.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED",c.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";const l=new WeakMap,h={set(t,e){throw new Error(`Tried to write to "${t.constructor.name}#${String(e)}" on immutable component. Use .getMutableComponent() to modify a component.`)}};var u=0;class p{constructor(t){this._world=t||null,this.id=u++,this._ComponentTypes=[],this._components={},this._tags=[],this.queries=[]}getComponent(t){var e=this._components[t.name];return function(t,e){if(void 0===e)return;let n=l.get(e);return n||(n=new Proxy(e,h),l.set(e,n)),n}(0,e)}getComponents(){return this._components}getComponentTypes(){return this._ComponentTypes}getMutableComponent(t){for(var e=this._components[t.name],n=0;n<this.queries.length;n++){var o=this.queries[n];o.reactive&&o.eventDispatcher.dispatchEvent(c.prototype.COMPONENT_CHANGED,this,e)}return e}addComponent(t,e){return this._world.entityAddComponent(this,t,e),this}removeComponent(t){return this._world.entityRemoveComponent(this,t),this}hasComponent(t){return!!~this._ComponentTypes.indexOf(t)}hasAllComponents(t){for(var e=!0,n=0;n<t.length;n++)e=e&&!!~this._ComponentTypes.indexOf(t[n]);return e}removeAllComponents(){return this._world.entityRemoveAllComponents(this)}hasTag(t){return!!~this._tags.indexOf(t)}addTag(t){return this._world.entityAddTag(this,t),this}removeTag(t){return this._world.entityRemoveTag(this,t),this}__init(){this.id=u++,this._world=null,this._ComponentTypes.length=0,this.queries.length=0,this._components={},this._tags.length=0}dispose(){return this._world.removeEntity(this)}}class f{constructor(t){this.freeList=[],this.count=0,this.T=t;var e=null;arguments.length>1&&(e=Array.prototype.slice.call(arguments)).shift(),this.createElement=e?()=>new t(...e):()=>new t,this.initialObject=this.createElement()}aquire(){this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1);var t=this.freeList.pop();return t.__init?t.__init():t.copy&&t.copy(this.initialObject),t}release(t){this.freeList.push(t)}expand(t){for(var e=0;e<t;e++)this.freeList.push(this.createElement());this.count+=t}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class d{constructor(t){this._world=t,this._queries={}}onEntityAdded(t,e){for(var n in this._queries){var o=this._queries[n];~o.Components.indexOf(e)&&t.hasAllComponents(o.Components)&&!~o.entities.indexOf(t)&&(o.eventDispatcher.dispatchEvent(c.prototype.ENTITY_ADDED,t),t.queries.push(o),o.entities.push(t))}}onEntityRemoved(t,e){for(var n in this._queries){var o=this._queries[n];if(~o.Components.indexOf(e)&&t.hasAllComponents(o.Components)){var i=o.entities.indexOf(t);~i&&(o.entities.splice(i,1),i=t.queries.indexOf(o),t.queries.splice(i,1),o.eventDispatcher.dispatchEvent(c.prototype.ENTITY_REMOVED,t))}}}getQuery(t){var e=a(t),n=this._queries[e];return n||(this._queries[e]=n=new c(t,this._world)),n}stats(){var t={};for(var e in this._queries)t[e]=this._queries[e].stats();return t}}class m{constructor(t){this.world=t,this.componentsManager=t.componentsManager,this._entities=[],this._tags={},this._queryManager=new d(this),this.eventDispatcher=new i,this._entityPool=new f(p)}createEntity(){var t=this._entityPool.aquire();return t._world=this,this._entities.push(t),this.eventDispatcher.dispatchEvent(v,t),t}entityAddComponent(t,e,n){if(!~t._ComponentTypes.indexOf(e)){t._ComponentTypes.push(e);var o=this.world.componentsManager.getComponentsPool(e).aquire();if(t._components[e.name]=o,n)if(o.copy)o.copy(n);else for(var i in n)o[i]=n[i];this._queryManager.onEntityAdded(t,e),this.eventDispatcher.dispatchEvent(_,t,e)}}entityRemoveComponent(t,e){var n=t._ComponentTypes.indexOf(e);if(~n){this.eventDispatcher.dispatchEvent(g,t,e),this._queryManager.onEntityRemoved(t,e),t._ComponentTypes.splice(n,1);var o=s(e),i=r(e),a=t._components[i];delete t._components[i],this.componentsManager._componentPool[o].release(a)}}entityRemoveAllComponents(t){let e=t._ComponentTypes;for(let o=e.length-1;o>=0;o--){var n=e[o];t.removeComponent(n)}}removeEntity(t){var e=this._entities.indexOf(t);if(!~e)throw new Error("Tried to remove entity not in list");for(var n in this.entityRemoveAllComponents(t),this.eventDispatcher.dispatchEvent(y,t),this._entities.splice(e,1),t._tags.length=0,this._tags){var o=this._tags[n],i=o.indexOf(t);~i&&o.splice(i,1)}t._world=null,this._entityPool.release(t)}removeAllEntities(){for(var t=this._entities.length-1;t>=0;t--)this._entities[t].dispose()}removeEntitiesByTag(t){var e=this._tags[t];if(e)for(var n=e.length-1;n>=0;n--){e[n].dispose()}}entityAddTag(t,e){var n=this._tags[e];n||(n=this._tags[e]=[]),~n.indexOf(t)||(n.push(t),t._tags.push(e))}entityRemoveTag(t,e){var n=this._tags[e];if(n){var o=n.indexOf(t);~o&&(n.splice(o,1),t._tags.splice(t._tags.indexOf(e),1))}}queryComponents(t){return this._queryManager.getQuery(t)}count(){return this._entities.length}stats(){var t={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var e in this.componentsManager._componentPool){var n=this.componentsManager._componentPool[e];t.componentPool[e]={used:n.totalUsed(),size:n.count}}return t}}const v="EntityManager#ENTITY_CREATE",y="EntityManager#ENTITY_REMOVE",_="EntityManager#COMPONENT_ADDED",g="EntityManager#COMPONENT_REMOVE";class E{constructor(){this.Components={},this.SingletonComponents={},this._componentPool={}}registerComponent(t){this.Components[t.name]=t}registerSingletonComponent(t){this.SingletonComponents[t.name]=t}getComponentsPool(t){var e=s(t);return this._componentPool[e]||(this._componentPool[e]=new f(t)),this._componentPool[e]}}class w{constructor(){this.componentsManager=new E(this),this.entityManager=new m(this),this.systemManager=new o(this),this.components={},this.eventQueues={},this.eventDispatcher=new i;var t=new CustomEvent("ecsy-world-created",{detail:this});window.dispatchEvent(t)}emitEvent(t,e){this.eventDispatcher.dispatchEvent(t,e)}addEventListener(t,e){this.eventDispatcher.addEventListener(t,e)}removeEventListener(t,e){this.eventDispatcher.removeEventListener(t,e)}registerSingletonComponent(t){return this.componentsManager.registerSingletonComponent(t),this.components[s(t)]=new t,this}registerComponent(t){return this.componentsManager.registerComponent(t),this}registerSystem(t,e){return this.systemManager.registerSystem(t,e),this}execute(t,e){this.systemManager.execute(t,e)}createEntity(){return this.entityManager.createEntity()}stats(){var t={entities:this.entityManager.stats(),system:this.systemManager.stats()};console.log(JSON.stringify(t,null,2))}}class b{toJSON(){var t={name:this.constructor.name,enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{},events:{}};if(this.config){var e=this.config.queries;for(let n in e){let o=e[n];if(t.queries[n]={key:this._queries[n].key},o.events){let e=t.queries[n].events={};for(let t in o.events){let i=o.events[t];e[t]={eventName:i.event,numEntities:this.events[n][t].length},i.components&&(e[t].components=i.components.map(t=>t.name))}}}let n=this.config.events;for(let e in n)t.events[e]={eventName:n[e]}}return t}constructor(t,e){if(this.world=t,this.enabled=!0,this._queries={},this.queries={},this._events={},this.events={},this.priority=0,this.executeTime=0,e&&e.priority&&(this.priority=e.priority),this.config=this.init?this.init():null,this.config){if(this.config.queries)for(var n in this.config.queries){var o=this.config.queries[n],i=o.components;if(!i||0===i.length)throw new Error("'components' attribute can't be empty in a query");var r=this.world.entityManager.queryComponents(i);if(this._queries[n]=r,this.queries[n]=r.entities,o.events){this.events[n]={};let t=this.events[n];for(let e in o.events){let n=o.events[e];t[e]=[];const i={EntityAdded:c.prototype.ENTITY_ADDED,EntityRemoved:c.prototype.ENTITY_REMOVED,EntityChanged:c.prototype.ENTITY_CHANGED};i[n.event]?r.eventDispatcher.addEventListener(i[n.event],n=>{t[e].push(n)}):"ComponentChanged"===n.event&&(r.reactive=!0,r.eventDispatcher.addEventListener(c.prototype.COMPONENT_CHANGED,(o,i)=>{-1!==n.components.indexOf(i.constructor)&&t[e].push(o)}))}}}if(this.config.events)for(let t in this.config.events){var s=this.config.events[t];this.events[t]=[],this.world.addEventListener(s,e=>{this.events[t].push(e)})}}}stop(){this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(var t in this.events){var e=this.events[t];if(Array.isArray(e))this.events[t].length=0;else for(t in e)e[t].length=0}}}var C={float:class{static validate(t){return Number(t)===t&&t%1!=0}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bind=function(t,e){return n=Array.prototype.slice.call(arguments,2),function(){var o=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,o)};var n}}])});